<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Composite//EN" "ditabase.dtd">
<topic id="topic1">
  <title id="pa137116">backup_file</title>
  <body>
    <p>Plugin command to move a backup file to the remote storage system.</p>
    <section id="section2">
      <title>Synopsis</title>
      <codeblock><varname>plugin_executable</varname> <b>backup_file</b> <varname>plugin_config_file</varname> <varname>file_to_backup</varname> <varname>scope</varname></codeblock>
    </section>
    <section id="section3">
      <title>Description</title>
      <p><codeph>gpbackup</codeph> invokes the <codeph>backup_file</codeph> plugin command on the
        master and each segment host for the file that <codeph>gpbackup</codeph> writes to a backup
        directory on local disk.</p>
      <p>The <codeph>backup_file</codeph> implementation should process and copy the file to the
        remote storage system. Do not remove the local copy of the file that you specify with
          <codeph>file_to_backup</codeph>.</p>
    </section>
    <section id="section4"><title>Arguments</title><parml>
        <plentry>
          <pt><varname>plugin_config_file</varname></pt>
          <pd>The absolute path to the plugin configuration YAML file.</pd>
        </plentry>
        <plentry>
          <pt><varname>file_to_backup</varname></pt>
          <pd>The absolute path to a local backup file generated by <codeph>gpbackup</codeph>. Do
            not remove the local copy of the file that you specify with
              <codeph>file_to_backup</codeph>.</pd>
        </plentry>
        <plentry>
          <pt><varname>scope</varname></pt>
          <pd>The execution scope (host or segment instance) for the plugin. Specify one of these
            values to execute the plugin based on the Greenplun Database configuration when the back
            up started.<ul id="ul_rpk_tzt_k2b">
              <li><codeph>master</codeph> - Execute the plugin once on the master host.</li>
              <li><codeph>segment_host</codeph> - Execute the plugin once on the segment hosts.</li>
              <li><codeph>segment</codeph> - Execute the plugin on the segment hosts, once for each
                active segment instance.</li>
            </ul></pd>
          <pd>For example, you run the command twice, specifying the scope <codeph>master</codeph>
            and then <codeph>segment_host</codeph> to run the plugin once on all the Greenplum
            Database hosts.</pd>
        </plentry>
      </parml>
    </section>
    <section id="section5"><title>Exit Code</title>
      <p>The <codeph>backup_file</codeph> command must exit with a value of 0 on success, non-zero
        if an error occurs. In the case of a non-zero exit code, <codeph>gpbackup</codeph> displays
        the contents of <codeph>stderr</codeph> to the user.</p>
    </section>
  </body>
</topic>
