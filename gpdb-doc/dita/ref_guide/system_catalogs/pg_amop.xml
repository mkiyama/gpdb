<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Composite//EN" "ditabase.dtd">
<topic id="topic1" xml:lang="en">
  <title id="fw143540">pg_amop</title>
  <body>
    <p>The catalog <codeph>pg_amop</codeph> stores information about operators associated with
      access method operator families. There is one row for each operator that is a member of an
      operator family. A family member can be either a <i>search</i> operator or an <i>ordering</i>
      operator. An operator can appear in more than one family, but cannot appear in more than one
      search position nor more than one ordering position within a family. (It is allowed, though
      unlikely, for an operator to be used for both search and ordering purposes.)</p>
    <table id="table_e5m_zhh_sfb">
      <title>pg_catalog.pg_amop</title>
      <tgroup cols="4">
        <colspec colnum="1" colname="col1" colwidth="118.24pt"/>
        <colspec colnum="2" colname="col2" colwidth="66.06pt"/>
        <colspec colnum="3" colname="col3" colwidth="101.06pt"/>
        <colspec colnum="4" colname="col4" colwidth="161.83pt"/>
        <thead>
          <row>
            <entry>Name</entry>
            <entry>Type</entry>
            <entry>References</entry>
            <entry>Description</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry><codeph>amopfamily</codeph></entry>
            <entry>oid</entry>
            <entry>pg_opfamily.oid</entry>
            <entry>The operator family of this entry</entry>
          </row>
          <row>
            <entry><codeph>amoplefttype</codeph></entry>
            <entry>oid</entry>
            <entry>pg_type.oid</entry>
            <entry>Left-hand input data type of operator</entry>
          </row>
          <row>
            <entry><codeph>amoprighttype</codeph></entry>
            <entry>oid</entry>
            <entry>pg_type.oid</entry>
            <entry>Right-hand input data type of operator</entry>
          </row>
          <row>
            <entry><codeph>amopstrategy</codeph></entry>
            <entry>smallint</entry>
            <entry> </entry>
            <entry>Operator strategy number</entry>
          </row>
          <row>
            <entry><codeph>amoppurpose</codeph></entry>
            <entry>char</entry>
            <entry> </entry>
            <entry>Operator purpose: <codeph>s</codeph> for search, <codeph>o</codeph> for
              ordering</entry>
          </row>
          <row>
            <entry><codeph>amopopr</codeph></entry>
            <entry>oid</entry>
            <entry>pg_operator.oid</entry>
            <entry>OID of the operator</entry>
          </row>
          <row>
            <entry><codeph>amopmethod</codeph></entry>
            <entry>oid</entry>
            <entry>pg_am.oid</entry>
            <entry>Index access method operator for this family</entry>
          </row>
          <row>
            <entry><codeph>amopsortfamily</codeph></entry>
            <entry>oid</entry>
            <entry>pg_opfamily.oid</entry>
            <entry>If an ordering operator, the B-tree operator family that is used for sorting. If
              a search operator, zero </entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    <p>A <i>search</i> operator entry indicates that an index of this operator family can be
      searched to find all rows satisfying <codeph>WHERE <varname>indexed_column</varname>
        <varname>operator</varname>
        <varname>constant</varname></codeph>. Obviously, such an operator must return boolean, and
      its left-hand input type must match the index's column data type.</p>
    <p>An <i>ordering</i> operator entry indicates that an index of this operator family can be
      scanned to return rows in the order represented by <codeph>ORDER BY
          <varname>indexed_column</varname>
        <varname>operator</varname>
        <varname>constant</varname></codeph>. Such an operator could return any sortable data type,
      though again its left-hand input type must match the index's column data type. The exact
      semantics of the <codeph>ORDER BY</codeph> are specified by the
        <codeph>amopsortfamily</codeph> column, which must reference a B-tree operator family for
      the operator's result type.</p>
    <note>At present, it is assumed that the sort order for an ordering operator is the default for
      the referenced operator family, <codeph>ASC</codeph>
      <codeph>NULLS</codeph>
      <codeph>LAST</codeph>. This might be relaxed in the future by adding additional columns to
      specify sort options explicitly.</note>
    <p>An entry's <codeph>amopmethod</codeph> must match the <codeph>opfmethod</codeph> of its
      containing operator family (including <codeph>amopmethod</codeph> here is an intentional
      denormalization of the catalog structure for performance reasons). Also,
        <codeph>amoplefttype</codeph> and <codeph>amoprighttype</codeph> must match the
        <codeph>oprleft</codeph> and <codeph>oprright</codeph> fields of the referenced
        <codeph>pg_operator</codeph> entry.</p>
  </body>
</topic>
