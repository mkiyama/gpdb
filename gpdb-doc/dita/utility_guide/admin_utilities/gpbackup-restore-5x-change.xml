<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Composite//EN" "ditabase.dtd">
<topic id="topic1">
    <!--install_guide/refs/gpstart.xml has a conref to this topic. -->
    <title id="jy143030">gpbackup/gprestore</title>
    <body>
        <p>Backup/restore a Greenplum Database system.</p>
    </body>
    <topic id="topic_pn3_yfn_pbb">
        <title>gpbackup</title>
        <body>
            <p>Backup a Greenplum Database system.</p>
            <section>
                <title>Synopsis</title>
                <codeblock><b>gpbackup</b> [<b>-d</b> <varname>master_data_directory</varname>] [<b>-B</b> <varname>parallel_processes</varname>] [<b>-R</b>]
        [<b>-m</b>] [<b>-y</b>] [<b>-a</b>] [<b>-t</b> <varname>timeout_seconds</varname>] [<b>-l</b> <varname>logfile_directory</varname>] 
        [<b>--skip-heap-checksum-validation</b>]
        [<b>-v</b> | <b>-q</b>]

<b>gpstart</b> <b>-?</b> | <b>-h</b> | <b>--help</b> 

<b>gpstart</b> <b>--version</b></codeblock>
            </section>
            <section>
                <title>Description</title>
                <p>TBD</p>
            </section>
            <section>
                <title>Options</title>
                <parml>
                    <plentry>
                        <pt>-a</pt>
                        <pd>Do not prompt the user for confirmation.</pd>
                    </plentry>
                    <plentry>
                        <pt>-B <varname>parallel_processes</varname></pt>
                        <pd>The number of segments to start in parallel. If not specified, the
                            utility will start up to 64 parallel processes depending on how many
                            segment instances it needs to start.</pd>
                    </plentry>
                    <plentry>
                        <pt>-d <varname>master_data_directory</varname></pt>
                        <pd>Optional. The master host data directory. If not specified, the value
                            set for <codeph>$MASTER_DATA_DIRECTORY</codeph> will be used.</pd>
                    </plentry>
                    <plentry>
                        <pt>-l <varname>logfile_directory</varname></pt>
                        <pd>The directory to write the log file. Defaults to
                                <codeph>~/gpAdminLogs</codeph>.</pd>
                    </plentry>
                    <plentry>
                        <pt>-m</pt>
                        <pd>Optional. Starts the master instance only, which may be useful for
                            maintenance tasks. This mode only allows connections to the master in
                            utility mode. For example:</pd>
                        <pd>
                            <codeblock>PGOPTIONS='-c gp_session_role=utility' psql</codeblock>
                        </pd>
                        <pd>The consistency of the heap checksum setting on master and segment
                            instances is not checked.</pd>
                    </plentry>
                    <plentry>
                        <pt>-q</pt>
                        <pd>Run in quiet mode. Command output is not displayed on the screen, but is
                            still written to the log file.</pd>
                    </plentry>
                    <plentry>
                        <pt>-R</pt>
                        <pd>Starts Greenplum Database in restricted mode (only database superusers
                            are allowed to connect).</pd>
                    </plentry>
                    <plentry>
                        <pt>--skip-heap-checksum-validation</pt>
                        <pd>During startup, the utility does not validate the consistency of the
                            heap checksum setting among the Greenplum Database master and segment
                            instances. The default is to ensure that the heap checksum setting is
                            the same on all instances, either enabled or disabled. <note
                                type="warning">Starting Greenplum Database without this validation
                                could lead to data loss. Use this option to start Greenplum Database
                                only when it is necessary to ignore the heap checksum verification
                                errors to recover data or to troubleshoot the errors.</note></pd>
                    </plentry>
                    <plentry>
                        <pt>-t <varname>timeout_seconds</varname></pt>
                        <pd>Specifies a timeout in seconds to wait for a segment instance to start
                            up. If a segment instance was shutdown abnormally (due to power failure
                            or killing its <codeph>postgres</codeph> database listener process, for
                            example), it may take longer to start up due to the database recovery
                            and validation process. If not specified, the default timeout is 60
                            seconds.</pd>
                    </plentry>
                    <plentry>
                        <pt>-v</pt>
                        <pd>Displays detailed status, progress and error messages output by the
                            utility.</pd>
                    </plentry>
                    <plentry>
                        <pt>-y</pt>
                        <pd>Optional. Do not start the standby master host. The default is to start
                            the standby master host and synchronization process.</pd>
                    </plentry>
                    <plentry>
                        <pt>-? | -h | --help</pt>
                        <pd>Displays the online help.</pd>
                    </plentry>
                    <plentry>
                        <pt>--version</pt>
                        <pd>Displays the version of this utility.</pd>
                    </plentry>
                </parml>
            </section>
            <section>
                <title>Examples</title>
                <p>Start a Greenplum Database system:</p>
                <codeblock>gpstart</codeblock>
                <p>Start a Greenplum Database system in restricted mode (only allow superuser
                    connections):</p>
                <codeblock>gpstart -R</codeblock>
                <p>Start the Greenplum master instance only and connect in utility mode:</p>
                <codeblock>gpstart -m PGOPTIONS='-c gp_session_role=utility' psql</codeblock>
            </section>
            <section>
                <title>See Also</title>
                <p><codeph><xref href="gpstop.xml#topic1">gpstop</xref></codeph>, <codeph><xref
                            href="gpinitsystem.xml#topic1"/></codeph></p>
            </section>
        </body>
    </topic>
    <topic id="topic_cdf_dgn_pbb">
        <title>gprestore</title>
        <body>
            <p>Restore a Greenplum Database system from a backup created with
                    <codeph>gpbackup</codeph>.</p>
            <section>
                <title>Synopsis</title>
                <codeblock><b>gprestore</b> [<b>-d</b> <varname>master_data_directory</varname>] [<b>-B</b> <varname>parallel_processes</varname>] [<b>-R</b>]
        [<b>-m</b>] [<b>-y</b>] [<b>-a</b>] [<b>-t</b> <varname>timeout_seconds</varname>] [<b>-l</b> <varname>logfile_directory</varname>] 
        [<b>--skip-heap-checksum-validation</b>]
        [<b>-v</b> | <b>-q</b>]

<b>gpstart</b> <b>-?</b> | <b>-h</b> | <b>--help</b> 

<b>gpstart</b> <b>--version</b></codeblock>
            </section>
            <section>
                <title>Description</title>
                <p>TBD</p>
            </section>
            <section>
                <title>Options</title>
                <parml>
                    <plentry>
                        <pt>-a</pt>
                        <pd>Do not prompt the user for confirmation.</pd>
                    </plentry>
                    <plentry>
                        <pt>-B <varname>parallel_processes</varname></pt>
                        <pd>The number of segments to start in parallel. If not specified, the
                            utility will start up to 64 parallel processes depending on how many
                            segment instances it needs to start.</pd>
                    </plentry>
                    <plentry>
                        <pt>-d <varname>master_data_directory</varname></pt>
                        <pd>Optional. The master host data directory. If not specified, the value
                            set for <codeph>$MASTER_DATA_DIRECTORY</codeph> will be used.</pd>
                    </plentry>
                    <plentry>
                        <pt>-l <varname>logfile_directory</varname></pt>
                        <pd>The directory to write the log file. Defaults to
                                <codeph>~/gpAdminLogs</codeph>.</pd>
                    </plentry>
                    <plentry>
                        <pt>-m</pt>
                        <pd>Optional. Starts the master instance only, which may be useful for
                            maintenance tasks. This mode only allows connections to the master in
                            utility mode. For example:</pd>
                        <pd>
                            <codeblock>PGOPTIONS='-c gp_session_role=utility' psql</codeblock>
                        </pd>
                        <pd>The consistency of the heap checksum setting on master and segment
                            instances is not checked.</pd>
                    </plentry>
                    <plentry>
                        <pt>-q</pt>
                        <pd>Run in quiet mode. Command output is not displayed on the screen, but is
                            still written to the log file.</pd>
                    </plentry>
                    <plentry>
                        <pt>-R</pt>
                        <pd>Starts Greenplum Database in restricted mode (only database superusers
                            are allowed to connect).</pd>
                    </plentry>
                    <plentry>
                        <pt>--skip-heap-checksum-validation</pt>
                        <pd>During startup, the utility does not validate the consistency of the
                            heap checksum setting among the Greenplum Database master and segment
                            instances. The default is to ensure that the heap checksum setting is
                            the same on all instances, either enabled or disabled. <note
                                type="warning">Starting Greenplum Database without this validation
                                could lead to data loss. Use this option to start Greenplum Database
                                only when it is necessary to ignore the heap checksum verification
                                errors to recover data or to troubleshoot the errors.</note></pd>
                    </plentry>
                    <plentry>
                        <pt>-t <varname>timeout_seconds</varname></pt>
                        <pd>Specifies a timeout in seconds to wait for a segment instance to start
                            up. If a segment instance was shutdown abnormally (due to power failure
                            or killing its <codeph>postgres</codeph> database listener process, for
                            example), it may take longer to start up due to the database recovery
                            and validation process. If not specified, the default timeout is 60
                            seconds.</pd>
                    </plentry>
                    <plentry>
                        <pt>-v</pt>
                        <pd>Displays detailed status, progress and error messages output by the
                            utility.</pd>
                    </plentry>
                    <plentry>
                        <pt>-y</pt>
                        <pd>Optional. Do not start the standby master host. The default is to start
                            the standby master host and synchronization process.</pd>
                    </plentry>
                    <plentry>
                        <pt>-? | -h | --help</pt>
                        <pd>Displays the online help.</pd>
                    </plentry>
                    <plentry>
                        <pt>--version</pt>
                        <pd>Displays the version of this utility.</pd>
                    </plentry>
                </parml>
            </section>
            <section>
                <title>Examples</title>
                <p>Start a Greenplum Database system:</p>
                <codeblock>gpstart</codeblock>
                <p>Start a Greenplum Database system in restricted mode (only allow superuser
                    connections):</p>
                <codeblock>gpstart -R</codeblock>
                <p>Start the Greenplum master instance only and connect in utility mode:</p>
                <codeblock>gpstart -m PGOPTIONS='-c gp_session_role=utility' psql</codeblock>
            </section>
            <section>
                <title>See Also</title>
                <p><codeph><xref href="gpstop.xml#topic1">gpstop</xref></codeph>, <codeph><xref
                            href="gpinitsystem.xml#topic1"/></codeph></p>
            </section>
        </body>
    </topic>
</topic>
